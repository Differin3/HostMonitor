RewriteEngine On

# Разрешаем прямой доступ к файлам API
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^api/ - [L]

# API запросы - пробрасываем в api/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^api/(.*)$ api/$1 [L]

# Старые запросы через api.php (для совместимости)
RewriteRule ^api-old/(.*)$ api.php?endpoint=$1 [QSA,L]

# Чистые URL
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^ index.php [L]

